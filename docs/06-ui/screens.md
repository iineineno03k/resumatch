# 画面設計

## 画面一覧

| # | 画面名 | パス | 概要 | MVP |
|---|--------|------|------|-----|
| 1 | ログイン | `/sign-in` | Clerk UI | ○ |
| 2 | 新規登録 | `/sign-up` | Clerk UI | ○ |
| 3 | チーム作成 | `/onboarding` | 初回ログイン時 | ○ |
| 4 | 招待リンク | `/invite/:token` | 招待された人がアクセス | ○ |
| 5 | 求人一覧 | `/jobs` | ポジション一覧 | ○ |
| 6 | 求人作成 | `/jobs/new` | ポジション作成フォーム | ○ |
| 7 | 求人編集 | `/jobs/:id/edit` | ポジション編集フォーム | ○ |
| 8 | 応募者一覧 | `/applicants` | フィルタ・検索付き | ○ |
| 9 | 応募者登録 | `/applicants/new` | 基本情報 + PDF | ○ |
| 10 | 応募者詳細 | `/applicants/:id` | 情報 + AI解析 + メモ | ○ |
| 11 | チーム設定 | `/settings` | 招待リンク発行など | △ |

---

## 画面遷移図

```
【通常フロー】
[ログイン] → [チーム作成（初回のみ）] → [求人一覧]
                                            ↓
                                    [求人作成/編集]
                                            ↓
                                    [応募者一覧] ←→ [応募者登録]
                                            ↓
                                    [応募者詳細]

【招待フロー】
[招待リンク] → [ログイン/新規登録] → [チーム参加完了] → [求人一覧]
     ↓
  (チーム情報表示)
```

---

## 各画面の詳細

### 1. ログイン `/sign-in`

Clerk の組み込みUIを使用。カスタマイズ不要。

---

### 2. 新規登録 `/sign-up`

Clerk の組み込みUIを使用。カスタマイズ不要。

---

### 3. チーム作成 `/onboarding`

初回ログイン時、チーム未所属の場合に表示。

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  チームを作成してください                                │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ チーム名                                         │   │
│  │ [株式会社サンプル                            ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ チームID（URL用）                               │   │
│  │ [sample-inc                                  ]   │   │
│  │ → resumatch.com/sample-inc で使用されます       │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│                              [チームを作成する]         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- チーム名入力（必須）
- チームID（slug）入力（必須、英数字とハイフンのみ）
- 作成ボタン

---

### 4. 招待リンク `/invite/:token`

招待リンクをクリックした人が最初にアクセスする画面。

**有効な招待の場合:**

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │                                                  │   │
│  │       株式会社サンプル に招待されています         │   │
│  │                                                  │   │
│  │       参加すると「メンバー」として                │   │
│  │       チームに加わります。                       │   │
│  │                                                  │   │
│  │       有効期限: 2025/01/08 まで                  │   │
│  │                                                  │   │
│  │            [招待を受け入れる]                    │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**無効な招待の場合:**

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch                                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │                                                  │   │
│  │       この招待リンクは無効です                   │   │
│  │                                                  │   │
│  │       ・有効期限が切れています                   │   │
│  │       ・すでに使用されています                   │   │
│  │       ・リンクが間違っています                   │   │
│  │                                                  │   │
│  │       招待した方に新しいリンクを                 │   │
│  │       発行してもらってください。                 │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**フロー:**

```
1. 招待リンクにアクセス
   ↓
2. GET /api/invitations/:token で検証
   ↓
3-a. 有効 → チーム情報表示
   ↓
4-a. 「招待を受け入れる」クリック
   ↓
5-a. 未ログイン → Clerkログイン画面へ（リダイレクトURLに招待tokenを含める）
     ログイン済み → POST /api/invitations/:token/accept
   ↓
6. チームのページへリダイレクト

3-b. 無効 → エラーメッセージ表示
```

---

### 5. 求人一覧 `/jobs`

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  求人一覧                           [+ 新規求人を作成]  │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ● バックエンドエンジニア              募集中     │   │
│  │   応募者: 12名                                   │   │
│  │   作成日: 2025/01/01                             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ● フロントエンドエンジニア            募集中     │   │
│  │   応募者: 8名                                    │   │
│  │   作成日: 2025/01/02                             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ○ デザイナー                          募集終了   │   │
│  │   応募者: 5名                                    │   │
│  │   作成日: 2024/12/15                             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- ヘッダー（ナビゲーション）
- 求人カード一覧
  - タイトル
  - ステータス（募集中/募集終了）
  - 応募者数
  - 作成日
- 新規作成ボタン
- カードクリックで編集画面へ

---

### 6. 求人作成 `/jobs/new`

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ← 求人一覧に戻る                                       │
│                                                         │
│  新規求人を作成                                         │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 求人タイトル *                                   │   │
│  │ [バックエンドエンジニア                      ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 募集要項                                         │   │
│  │ [                                             ]   │   │
│  │ [   自社プロダクトの開発をお任せします。      ]   │   │
│  │ [   主にAPIの設計・実装を担当いただきます。   ]   │   │
│  │ [                                             ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 必須スキル・要件                                 │   │
│  │ [                                             ]   │   │
│  │ [   - Webアプリケーション開発経験3年以上      ]   │   │
│  │ [   - TypeScript, Node.js の実務経験          ]   │   │
│  │ [   - RDBの設計・運用経験                     ]   │   │
│  │ [                                             ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│                    [キャンセル]  [作成する]             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- 戻るリンク
- タイトル入力（必須）
- 募集要項テキストエリア
- 必須スキルテキストエリア
- キャンセル/作成ボタン

---

### 7. 求人編集 `/jobs/:id/edit`

求人作成と同じレイアウト。
- タイトルが「求人を編集」に変わる
- 既存データがフォームに入った状態
- ボタンが「更新する」に変わる
- ステータス切り替え（募集中/募集終了）を追加

---

### 8. 応募者一覧 `/applicants`

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  応募者一覧                         [+ 応募者を登録]    │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 求人: [全て           ▼]                        │   │
│  │ ステータス: [全て ▼] [書類選考 ▼] [1次面接 ▼]...│   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 名前         │ 求人            │ ステータス │ 応募日     │
│  ├─────────────────────────────────────────────────┤   │
│  │ 山田太郎     │ バックエンド    │ 1次面接   │ 2025/01/05 │
│  │   AI: Java 5年、PM経験あり。金融系に強み。      │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ 佐藤花子     │ フロントエンド  │ 書類選考  │ 2025/01/04 │
│  │   AI: React 3年、デザインもできる。             │   │
│  ├─────────────────────────────────────────────────┤   │
│  │ 鈴木一郎     │ バックエンド    │ 内定      │ 2025/01/01 │
│  │   AI: Go 4年、インフラ経験豊富。                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  < 1 2 3 ... 10 >                                       │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- フィルター
  - 求人で絞り込み
  - ステータスで絞り込み（複数選択可）
- 応募者テーブル
  - 名前（クリックで詳細へ）
  - 応募求人
  - ステータス（バッジ表示）
  - 応募日
  - AIサマリー（1行で表示）
- ページネーション
- 応募者登録ボタン

---

### 9. 応募者登録 `/applicants/new`

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ← 応募者一覧に戻る                                     │
│                                                         │
│  応募者を登録                                           │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 応募先の求人 *                                   │   │
│  │ [バックエンドエンジニア               ▼]        │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 氏名 *                                           │   │
│  │ [山田太郎                                    ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ メールアドレス                                   │   │
│  │ [yamada@example.com                          ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 電話番号                                         │   │
│  │ [090-1234-5678                               ]   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 履歴書（PDF）                                    │   │
│  │ ┌───────────────────────────────────────────┐   │   │
│  │ │                                           │   │   │
│  │ │    ここにファイルをドラッグ&ドロップ      │   │   │
│  │ │    または [ファイルを選択]                │   │   │
│  │ │                                           │   │   │
│  │ └───────────────────────────────────────────┘   │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│                    [キャンセル]  [登録する]             │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- 戻るリンク
- 求人選択（ドロップダウン、必須）
- 氏名入力（必須）
- メールアドレス入力
- 電話番号入力
- 履歴書PDFアップロード
  - ドラッグ&ドロップ対応
  - ファイル選択ボタン
- キャンセル/登録ボタン

---

### 10. 応募者詳細 `/applicants/:id`（メイン画面）

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ← 応募者一覧に戻る                                     │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  山田太郎                                        │   │
│  │  バックエンドエンジニア                          │   │
│  │                                                  │   │
│  │  ステータス: [1次面接 ▼]                         │   │
│  │                                                  │   │
│  │  yamada@example.com  |  090-1234-5678            │   │
│  │  応募日: 2025/01/05                              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  AI解析結果                    [再解析] [PDF]   │   │
│  ├─────────────────────────────────────────────────┤   │
│  │                                                  │   │
│  │  サマリー                                        │   │
│  │  Java 5年、PM経験2年。金融系システム開発が      │   │
│  │  得意。AWS認定資格保持。                         │   │
│  │                                                  │   │
│  │  スキル                                          │   │
│  │  [Java] [Spring Boot] [AWS] [PostgreSQL]         │   │
│  │  [Docker] [Kubernetes]                           │   │
│  │                                                  │   │
│  │  経歴                                            │   │
│  │  ● 株式会社〇〇（2019/04 - 2024/03）            │   │
│  │    バックエンドエンジニア                        │   │
│  │    銀行向け基幹システムの設計・開発...           │   │
│  │                                                  │   │
│  │  ● 株式会社△△（2017/04 - 2019/03）            │   │
│  │    プログラマー                                  │   │
│  │    Webアプリケーション開発...                    │   │
│  │                                                  │   │
│  │  資格                                            │   │
│  │  [AWS SAA] [応用情報技術者] [Oracle Gold]        │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  メモ・評価                                      │   │
│  ├─────────────────────────────────────────────────┤   │
│  │                                                  │   │
│  │  田中（2025/01/06）               ★★★★☆       │   │
│  │  技術力は高い。コミュ力も問題なし。次に進め     │   │
│  │  てよいと思う。                                  │   │
│  │                                                  │   │
│  │  ─────────────────────────────────────────────  │   │
│  │                                                  │   │
│  │  佐藤（2025/01/07）               ★★★☆☆       │   │
│  │  経験は十分。給与希望がやや高め。要交渉。       │   │
│  │                                                  │   │
│  │  ─────────────────────────────────────────────  │   │
│  │                                                  │   │
│  │  ┌───────────────────────────────────────────┐  │   │
│  │  │ メモを追加...                             │  │   │
│  │  │                                           │  │   │
│  │  │                                           │  │   │
│  │  └───────────────────────────────────────────┘  │   │
│  │  評価: ☆ ☆ ☆ ☆ ☆            [メモを追加]    │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**

1. **ヘッダー部分**
   - 戻るリンク
   - 応募者名（大きく）
   - 応募求人名
   - ステータス（ドロップダウンで変更可）
   - 連絡先（メール、電話）
   - 応募日

2. **AI解析結果セクション**（メイン機能）
   - サマリー（1-2文の要約）
   - スキルタグ
   - 経歴リスト
   - 資格タグ
   - 再解析ボタン
   - PDFダウンロードボタン

3. **メモ・評価セクション**
   - 既存メモ一覧
     - 投稿者名
     - 投稿日時
     - 星評価
     - メモ内容
   - 新規メモ入力欄
   - 星評価選択
   - 追加ボタン

---

### 11. チーム設定 `/settings`（MVP後）

招待リンクの発行などを行う画面。MVPでは簡易版でOK。

```
┌─────────────────────────────────────────────────────────┐
│  ResuMatch          [求人] [応募者]        [ユーザー ▼] │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  チーム設定                                             │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ チーム情報                                       │   │
│  │                                                  │   │
│  │ チーム名: 株式会社サンプル                       │   │
│  │ チームID: sample-inc                            │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ メンバー招待                                     │   │
│  │                                                  │   │
│  │ 権限: [メンバー ▼]                              │   │
│  │                                                  │   │
│  │ [招待リンクを発行する]                           │   │
│  │                                                  │   │
│  │ ─────────────────────────────────────────────   │   │
│  │                                                  │   │
│  │ 発行済みリンク:                                  │   │
│  │ https://resumatch.com/invite/abc123...  [コピー] │   │
│  │ 有効期限: 2025/01/08                            │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │ メンバー一覧                                     │   │
│  │                                                  │   │
│  │ 田中太郎    owner                               │   │
│  │ 佐藤花子    member                              │   │
│  │                                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

**要素:**
- チーム情報表示
- 招待リンク発行
  - 権限選択（admin/member）
  - 発行ボタン
  - 発行済みリンク表示（コピーボタン付き）
- メンバー一覧

---

## コンポーネント一覧

| コンポーネント | 用途 | Storybook |
|---------------|------|-----------|
| Header | 共通ヘッダー・ナビゲーション | ○ |
| JobCard | 求人一覧のカード | ○ |
| ApplicantTable | 応募者一覧テーブル | △ |
| ApplicantRow | テーブルの1行 | ○ |
| StatusBadge | ステータス表示バッジ | ○ |
| SkillTag | スキルタグ | ○ |
| FileUpload | PDFアップロード | ○ |
| AIAnalysisCard | AI解析結果表示 | ○ |
| NoteList | メモ一覧 | △ |
| NoteForm | メモ入力フォーム | ○ |
| StarRating | 星評価 | ○ |
